webpackJsonp([6],{"9luH":function(e,t,a){"use strict";(function(e){var r=a("woOf"),i=a.n(r),s=a("mvHQ"),o=a.n(s),n=a("1h8J"),l=a("vMJZ"),p=a("Gx7A");t.a={name:"member-default",data:function(){return{currentList:"",approvalList:[{id:1,memberName:"moster",role:2,enterpriseId:123,status:null}],total:0,total2:0,pageSize:12,pageSize2:12,currentPage:1,currentPage2:1,hostUrl:"/user/getMemberList",hostUrl2:"/user/getMemberListStatus",loading:!0,loading2:!1,rank:e.userItem.rank,approvalVisible:!1,approvalForm:{memberRank:"",memberIdentifier:"",associationApproval:""},approvalFormRules:{memberRank:[{required:!0,message:"该选项不能为空",trigger:"blur"}],memberIdentifier:[{required:!0,message:"该选项不能为空",trigger:"blur"}],associationApproval:[{required:!1,message:"该选项不能为空",trigger:"blur"}]},currentApproval:0,loading3:!1}},methods:{init:function(){var t=this.$router.options.routes[0].children.findIndex(function(e){return"会员中心"==e.showName});e.currentPath.data=[t,0]},routerLink:function(e,t){var a=new Object;a.id=e,a.type=t;var r=o()(a);this.$router.push({path:"/member_2",query:{queryMsg:r}})},getData:function(){var e=this,t=this.HOST+this.hostUrl,a=e.currentPage;e.loading=!0,Object(n.b)(t,a).then(function(t){var a=t.message;a&&(e.loading=!1,e.currentList=a.list,e.total=a.total,e.currentPage=a.pageNum,e.pageSize=a.pageSize)}).catch(function(t){e.loading=!1,e.$message.error({showClose:!0,message:"获取会员列表错误",duration:2e3})})},handleCurrentChange:function(e){this.currentPage=e,this.getData()},getData2:function(){var e=this,t=this.HOST+this.hostUrl2,a=e.currentPage2;e.loading2=!0,Object(n.b)(t,a).then(function(t){var a=t.message;a&&(e.loading2=!1,e.approvalList=a.list,e.total2=a.total,e.currentPage2=a.pageNum,e.pageSize2=a.pageSize)}).catch(function(t){e.loading2=!1,e.$message.error({showClose:!0,message:"获取审批列表错误",duration:2e3})})},handleCurrentChange2:function(e){this.currentPage2=e,this.getData2()},approvalSubmit:function(e){var t=this,a=this,r=void 0;1==e?a.$refs.approvalForm.validate(function(e){e?(a.loading3=!0,r={userId:a.approvalList[a.currentApproval].id,memberId:a.approvalList[a.currentApproval].memberId,status:2},i()(r,a.approvalForm),Object(l.b)(r).then(function(e){t.loading3=!1,"success"==e.result?(a.$refs.approvalForm.resetFields(),a.approvalVisible=!1,a.$message({showClose:!0,message:"完成审批通过",type:"success",duration:2e3})):a.$message({showClose:!0,message:e.message,type:"error",duration:2e3})}).catch(function(e){a.$message({showClose:!0,message:e.message,type:"error",duration:2e3})})):a.$message({showClose:!0,dangerouslyUseHTMLString:!0,message:"<p>提交失败,请检查表单是否有误</p>",type:"error",duration:3e3})}):2==e&&a.$confirm("确定为审批失败","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r={userId:a.approvalList[a.currentApproval].id,memberId:a.approvalList[a.currentApproval].memberId,status:3},Object(l.b)(r).then(function(e){"success"==e.result?a.$message({showClose:!0,message:"完成审批驳回",type:"success",duration:2e3}):a.$message({showClose:!0,message:e.message,type:"error",duration:2e3})}).catch(function(e){a.$message({showClose:!0,message:e.message,type:"error",duration:2e3})})})}},mounted:function(){var t=this,a=this;Object(l.c)(this.HOST).then(function(r){e.userItem.rank=r.message.role,a.rank=r.message.role,r.message.role>0&&r.message.role<5&&t.getData2()})},activated:function(){this.rank=e.userItem.rank,this.rank>0&&this.rank<5&&this.getData2(),this.init(),this.getData()},components:{noContent:p.a}}}).call(t,a("DuR2"))},DT0f:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("9luH"),i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"member-default"}},[a("div",{attrs:{id:"main-list-member"}},[a("div",{staticClass:"memberList-title"},[e._v("会员列表")]),e._v(" "),e.loading?a("div",[a("h1",{attrs:{id:"bigTitle"}},[e._v("会员列表正在加载... loading...")]),e._v(" "),a("noContent",{attrs:{loadName:"会员列表"}})],1):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],attrs:{id:"list-box"}},[a("div",{staticClass:"lists"},e._l(e.currentList,function(t,r){return a("li",{key:r},[a("div",{staticClass:"right_part"},[a("div",{staticClass:"title_hover"},[a("h2",{staticClass:"title",on:{click:function(t){e.routerLink(e.currentList[r].id,1)}}},[a("a",[e._v("\n                  "+e._s(t.memberName)+"\n                ")])])])])])})),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)])]),e._v(" "),e.rank>0&&e.rank<5?a("div",{attrs:{id:"approval-list"}},[a("div",{staticClass:"approval-title"},[e._v("待审批列表")]),e._v(" "),e.loading2?a("div",[a("h1",{attrs:{id:"bigTitle"}},[e._v("会员列表正在加载... loading...")]),e._v(" "),a("noContent",{attrs:{loadName:"会员列表"}})],1):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading2,expression:"!loading2"}],attrs:{id:"list-box"}},[a("div",{staticClass:"lists"},e._l(e.approvalList,function(t,r){return a("li",{key:r},[a("div",{staticClass:"right_part"},[a("h2",{staticClass:"title",on:{click:function(t){e.routerLink(e.currentList[r].id,2)}}},[a("a",[e._v("\n                "+e._s(t.memberName)+"\n              ")])]),e._v(" "),a("div",{staticClass:"more-approval"},[a("div",{staticClass:"approval-button"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",round:""},on:{click:function(t){e.approvalVisible=!0,e.currentApproval=r}}},[e._v("通过审批")])],1),e._v(" "),a("div",{staticClass:"approval-button"},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",round:""},on:{click:function(t){e.currentApproval=r,e.approvalSubmit(2)}}},[e._v("拒绝审批")])],1)])])])})),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage2,"page-size":e.pageSize2,layout:"prev, pager, next, jumper",total:e.total2},on:{"current-change":e.handleCurrentChange2,"update:currentPage":function(t){e.currentPage2=t}}})],1)]),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading3,expression:"loading3"}],attrs:{title:"报名",visible:e.approvalVisible,"close-on-click-modal":!0,"modal-append-to-body":!1,top:"15vh","element-loading-text":"拼命加载中"},on:{"update:visible":function(t){e.approvalVisible=t}}},[a("el-form",{ref:"approvalForm",attrs:{model:e.approvalForm,rules:e.approvalFormRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"会员等级",prop:"memberRank"}},[a("el-input",{model:{value:e.approvalForm.memberRank,callback:function(t){e.$set(e.approvalForm,"memberRank",t)},expression:"approvalForm.memberRank"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"会员证号",prop:"memberIdentifier"}},[a("el-input",{model:{value:e.approvalForm.memberIdentifier,callback:function(t){e.$set(e.approvalForm,"memberIdentifier",t)},expression:"approvalForm.memberIdentifier"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"协会审批意见",prop:"associationApproval"}},[a("el-input",{model:{value:e.approvalForm.associationApproval,callback:function(t){e.$set(e.approvalForm,"associationApproval",t)},expression:"approvalForm.associationApproval"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.approvalSubmit(1)}}},[e._v("确认")]),e._v(" "),a("el-button",{nativeOn:{click:function(t){e.approvalVisible=!1}}},[e._v("取消")])],1)],1)],1):e._e()])},staticRenderFns:[]};var s=function(e){a("dZKH")},o=a("VU/8")(r.a,i,!1,s,"data-v-02c6a16f",null);t.default=o.exports},dZKH:function(e,t){}});
//# sourceMappingURL=6.37528cac449ac44ca6ce.js.map