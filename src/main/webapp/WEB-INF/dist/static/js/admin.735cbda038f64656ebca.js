webpackJsonp([20],{"6A3X":function(e,t){},BIWd:function(e,t){},BJpj:function(e,t){},GVGS:function(e,t){},IZ1S:function(e,t){},"R+qx":function(e,t,a){"use strict";(function(e){var o=a("//Fk"),i=a.n(o),s=a("pMgH");t.a={name:"admin",components:{App:s.a},data:function(){return{rank:"",username:""}},watch:{},methods:{getLoginData:function(e){var t=this.HOST+"/user/getPermission";return this.axios({method:"get",url:t}).then(function(e){return i.a.resolve(e.data)}).catch(function(e){return i.a.reject(e.data)})},checkLoginStatus:function(){var t=this;t.getLoginData().then(function(a){t.rank=a.message,e.userItem.userName=localStorage.getItem("robotKeyName")}).catch(function(e){})}},mounted:function(){},created:function(){this.checkLoginStatus()}}}).call(t,a("DuR2"))},dBgW:function(e,t){},e0XP:function(e,t){},hRzL:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("7+uW"),i=a("R+qx"),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"admin"}},[t("div",{staticClass:"bg-img"},[t("div",{staticClass:"bg-content"},[t("div",{staticClass:"m-header1"},[this._m(0),this._v(" "),t("div",{staticClass:"topbar-account topbar-btn media"},[t("el-dropdown",{attrs:{trigger:"click"}},[t("span",{staticClass:"el-dropdown-link userinfo-inner"},[t("i",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}}),t("i",{staticClass:"el-icon-caret-bottom"})]),this._v(" "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[t("a",{attrs:{href:"index.html"}},[t("span",{staticStyle:{color:"#555","font-size":"14px"}},[this._v("返回前端页面")])])])],1)],1)],1)])]),this._v(" "),t("app",{attrs:{isShow:this.rank>0&&this.rank<5}})],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"media2"},[t("a",{staticClass:"ex2",attrs:{href:"admin.html",target:"_blank"}},[this._v("后台管理系统")])])}]};var r=function(e){a("GVGS")},n=a("VU/8")(i.a,s,!1,r,null,null).exports,l=a("zL8q"),d=a.n(l),m=a("mtWM"),c=a.n(m),u=a("Rf8U"),g=a.n(u);a("j1ja"),a("tvR6"),a("e0XP"),a("6A3X");o.default.use(d.a),o.default.use(g.a,c.a),o.default.config.productionTip=!1;var h=document.location.href,p=h.substr(1).indexOf("/admin"),f=h.substr(0,p+1);o.default.prototype.HOST=f,o.default.prototype.tId=null,o.default.prototype.throttle=function(e,t){clearTimeout(this.tId),this.tId=setTimeout(function(){e.call(t)},200)},new o.default({el:"#admin",components:{admin:n},template:"<admin/>",data:{eventHub:new o.default}})},"o+oW":function(e,t){},oVf1:function(e,t){},pMgH:function(e,t,a){"use strict";var o=a("bOdI"),i=a.n(o),s={name:"user-list",props:["isRequested"],data:function(){var e;return{filters:{name:""},users:[(e={email:"123123@163.com",id:null,username:"John",password:"",sex:"1",phone:""},i()(e,"email",""),i()(e,"rank",""),e)],total:0,page:1,loading:!1}},methods:{formatSex:function(e,t){return 1==e.sex?"男":0==e.sex?"女":""},handleCurrentChange:function(e){this.page=e,this.search()},handleSearch:function(){this.total=0,this.page=1,this.search()},search:function(){var e=this,t={username:e.filters.name},a=e.HOST+"/user/manager/find";e.loading=!0,e.axios.get(a,{params:t}).then(function(t){e.users=t.data.message.list,e.total=t.data.message.total,e.pageSize=t.data.message.pageSize,e.loading=!1}).catch(function(t){e.loading=!1,e.users=[],e.total=0,e.$message.error({showClose:!0,message:"请求出现异常",duration:2e3})})}},activated:function(){this.search()},watch:{isRequested:function(){this.search()}},components:{}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"user-list"}},[a("el-row",{staticClass:"warp"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"warp-main",attrs:{span:24,"element-loading-text":"拼命加载中"}},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters}},[a("el-form-item",[a("el-input",{staticStyle:{"min-width":"240px"},attrs:{placeholder:"用户名/邮箱"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSearch(t):null}},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("查询")])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.users,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"昵称",width:"140",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"password",label:"密码",width:"140",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别",width:"100",formatter:e.formatSex,sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"260",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"联系方式",sortable:""}})],1)],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(s,r,!1,function(e){a("BIWd")},"data-v-554a2e58",null).exports,l=a("woOf"),d=a.n(l),m=a("mw3O"),c=a.n(m),u=a("aYpo");var g=function(e){if(!e)return"";var t=e.getFullYear(),a=e.getMonth()+1,o=e.getDate(),i=e.getHours(),s=e.getMinutes(),r=e.getSeconds(),n="";return i<10&&(i="0"+i),s<10&&(s="0"+s),r<10&&(r="0"+r),a<10&&(a="0"+a),o<10&&(o="0"+o),n+=t+"-"+a+"-"+o+" "+i+":"+s+":"+r},h={name:"artEdit",props:["currentTab","isRequested"],data:function(){return{categoryId:0,filters:{content:""},items:[],total:1,pageSize:12,page:1,loading:!1,sels:[],initFormRules:[{name:"用户列表",categoryId:""},{name:"近期活动",categoryId:""},{name:"协会活动",categoryId:""},{name:"新闻热点",categoryId:""},{name:"其他",categoryId:""},{name:"行业动态",categoryId:6},{name:"资讯热点",categoryId:12},{name:"行业报告",categoryId:""},{name:"政策",categoryId:7},{name:"通知公告",categoryId:9},{name:"协会动态",categoryId:10},{name:"协会会员",categoryId:""},{name:"协会之窗",categoryId:""},{name:"教育培训",categoryId:""},{name:"企业新闻",categoryId:5},{name:"品牌展厅",categoryId:""},{name:"会员动态",categoryId:8},{name:"产品推荐",categoryId:2},{name:"产品新闻",categoryId:1},{name:"产品评测",categoryId:3},{name:"产品库",categoryId:""},{name:"技术研讨",categoryId:""},{name:"基础知识",categoryId:4},{name:"案例库",categoryId:""},{name:"专家库",categoryId:""},{name:"专家智点",categoryId:11},{name:"高校",categoryId:""},{name:"展会动态",categoryId:""},{name:"未来展会",categoryId:""},{name:"展会回顾",categoryId:""},{name:"会议动态",categoryId:""},{name:"未来会议",categoryId:""},{name:"会议回顾",categoryId:""},{name:"广告1",categoryId:""},{name:"广告2",categoryId:""},{name:"广告3",categoryId:""}],customToolbar:[[{header:[!1,1,2,3,4,5,6]}],["bold","italic","underline","strike"],["clean"],[{align:""},{align:"center"},{align:"right"},{align:"justify"}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],["blockquote","code-block"],["image","link"]],editCurrentPage:1,editFormVisible:!1,editFormRules:{title:[{required:!0,message:"请输入文章名",trigger:"blur"}],source:[{required:!1,message:"请输入来源",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}],postDate:[{required:!1,message:"请填写日期",trigger:"blur"}]},editFormContent:[{page:1,content:""}],editCoverShow:!1,editForm:{id:0,title:"",source:"",postDate:"",img:"",content:[{page:1,content:""}]},addCurrentPage:1,addFormVisible:!1,addLoading:!1,addFormRules:{title:[{required:!0,message:"请输入文章名",trigger:"blur"}],source:[{required:!1,message:"请输入来源",trigger:"blur"}],content:[{required:!1,message:"请输入内容",trigger:"blur"}],postDate:[{required:!1,message:"请填写日期",trigger:"blur"}]},addFormContent:[{page:1,content:""}],addCoverShow:!1,addForm:{title:"",source:"",postDate:"",img:""},currentImg:new Object,imgFormVisible:!1,imgForm:{height:"",width:""},imgLoading:!1}},methods:{clickImg:function(e){var t=e.target;"IMG"==t.tagName&&(this.currentImg=e.target,this.imgForm.height=t.height,this.imgForm.width=t.width,t.title="点击编辑",this.imgFormVisible=!0)},imgEdited:function(){var e=parseFloat(this.imgForm.height),t=parseFloat(this.imgForm.width);this.currentImg.width=t,this.currentImg.height=e,this.imgFormVisible=!1},handleCurrentChange:function(e){this.page=e,this.search()},handleImageAdded:function(e,t,a,o){console.log(e);var i=this,s=e.name.split(".");s=s.pop(),console.log(s);var r=new FormData,n=void 0;s.indexOf("png")>-1||s.indexOf("jpg")>-1||s.indexOf("jpeg")>-1||s.indexOf("gif")>-1||s.indexOf("pdf")>-1?(r.append("imgs",e),n=i.HOST+"common/uploadImg"):(r.append("videos",e),n=i.HOST+"common/uploadVideo"),i.axios({url:n,method:"POST",headers:{"Content-Type":"multipart/form-data"},data:r}).then(function(e){if("success"==e.data.result){var o=e.data.message;s.indexOf("png")>-1||s.indexOf("jpg")>-1||s.indexOf("jpeg")>-1||s.indexOf("gif")>-1||s.indexOf("pdf")>-1?t.insertEmbed(a,"image",o[0]):t.insertEmbed(a,"video",o[0])}else i.$message.error({showClose:!0,message:"图片上传异常",duration:2e3})}).catch(function(e){console.log(e),i.$message.error({showClose:!0,message:"上传异常",duration:2e3})})},beforeAvatarUpload:function(e){e.size/1024/1024<10||this.$message.error("上传头像图片大小不能超过 10MB!")},showAddDialog:function(){this.addFormVisible=!0,this.addForm=d()(this.addForm,{postDate:""}),this.addFormContent=[{page:1,content:""}]},addImgUpload:function(e){var t=this,a=t.HOST+"/common/uploadImg",o=new FormData;o.append("imgs",e.file),t.axios({url:a,method:"POST",headers:{"Content-Type":"multipart/form-data"},data:o}).then(function(e){"success"==e.data.result?(t.$message.success({showClose:!0,message:"上传成功",duration:2e3}),t.addCoverShow=!0,t.addForm.img=e.data.message[0]):t.$message.error({showClose:!0,message:"图片上传异常",duration:2e3})}).catch(function(e){console.log(e),t.$message.error({showClose:!0,message:"图片上传异常",duration:2e3})})},addSubmit:function(){var e=this,t=d()({},e.addForm),a=new Date(t.postDate),o=g(a);t.title&&e.addFormContent[0].content?e.$confirm("确认添加吗","新增",{type:"warning"}).then(function(){e.addFormContent.forEach(function(t,a){e.addFormContent[a].content=t.content.replace(/<\/div>/g,"</p>").replace(/<div/g,"<p")});var a=e.HOST+"information/manager/addInformation",i=c.a.stringify({title:t.title,source:t.source,img:t.img,postDate:o,categoryId:e.categoryId,content:e.addFormContent},{arrayFormat:"indices",allowDots:!0});e.loading=!0,e.axios({method:"post",url:a,data:i}).then(function(t){if(e.loading=!1,e.addCoverShow=!1,"success"==t.data.result)e.$message.success({showClose:!0,message:"新增成功",duration:1500}),e.addFormVisible=!1,e.search();else{var a=t.data.message;e.$message.error({showClose:!0,message:a.toString(),duration:2e3}),e.addFormVisible=!1}}).catch(function(t){e.loading=!1,e.$message.error({showClose:!0,message:"请求出现异常",duration:2e3})})}):e.$message.warning({showClose:!0,message:"必填数据不能为空",duration:1e3})},delItem:function(e,t){var a=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){a.loading=!0;var e=t.id,o=a.HOST+"/information/manager/deleteInformation",i=c.a.stringify({ids:e});a.axios({method:"post",url:o,data:i}).then(function(e){if("success"==e.data.result)a.loading=!1,a.$message.success({showClose:!0,message:"删除成功",duration:1500}),a.search();else{var t=e.data.message;a.loading=!1,a.$message.error({showClose:!0,message:t.toString(),duration:2e3})}}).catch(function(e){a.loading=!1,console.log(e),a.$message.error({showClose:!0,message:"请求出现异常",duration:2e3})})}).catch(function(){})},selsChange:function(e){this.sels=e},batchDeleteItems:function(){var e=this;this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then(function(){e.loading=!0;var t=e.sels.map(function(e){return e.id}).toString(),a=e.HOST+"/information/manager/deleteInformation",o=c.a.stringify({ids:t});e.axios({method:"post",url:a,data:o}).then(function(t){if("success"==t.data.result)e.loading=!1,e.$message.success({showClose:!0,message:"删除成功",duration:1500}),e.search();else{var a=t.data.message;e.loading=!1,e.$message.error({showClose:!0,message:a.toString(),duration:2e3})}}).catch(function(t){e.loading=!1,console.log(t),e.$message.error({showClose:!0,message:"请求出现异常",duration:2e3})})}).catch(function(){})},handleSearch:function(){this.total=0,this.page=1,this.search()},keyUpSubmit:function(e){13===window.event.keyCode&&this.handleSearch()},search:function(){var e=this,t=e.initFormRules.findIndex(function(t){return t.name===e.currentTab}),a=e.HOST+"/common/search";e.categoryId=e.initFormRules[t].categoryId;var o=e.filters.content.trim();if(""!=e.categoryId){var i={pageNum:e.page,categoryId:e.categoryId,content:o,channel:1};e.loading=!0,e.axios.get(a,{params:i}).then(function(t){e.items=t.data.message.results.list,e.items.forEach(function(t,a){e.items[a].postDate=t.postDate.slice(0,10)}),e.total=t.data.message.results.total,e.pageSize=t.data.message.results.pageSize,e.loading=!1}).catch(function(t){e.loading=!1,e.items=[],e.total=0,e.$message.error({showClose:!0,message:"请求出现异常",duration:2e3})})}else e.items=[],e.total=0,e.$message.error({showClose:!0,message:"数据异常",duration:2e3})},showEditDialog:function(e,t){var a=this;t.img&&(a.editCoverShow=!0),this.editFormVisible=!0,this.editForm=d()({},t),t.content.forEach(function(e,t){a.editFormContent[t].content=e.content.replace(/<\/div>/g,"</p>").replace(/<div/g,"<p")})},editImgUpload:function(e){var t=this,a=t.HOST+"/common/uploadImg",o=new FormData;o.append("imgs",e.file),t.axios({url:a,method:"POST",headers:{"Content-Type":"multipart/form-data"},data:o}).then(function(e){"success"==e.data.result?(t.editCoverShow=!0,t.editForm.img=e.data.message):t.$message.error({showClose:!0,message:"图片上传异常",duration:2e3})}).catch(function(e){console.log(e),t.$message.error({showClose:!0,message:"图片上传异常",duration:2e3})})},editSubmit:function(){var e=this,t=d()({},this.editForm),a=new Date(t.postDate);g(a);t.title&&t.id?e.$confirm("确认更改吗","编辑",{type:"warning"}).then(function(){var a=e.HOST+"/information/manager/updateInformation",o=c.a.stringify({url:t.url,id:t.id,img:t.img,title:t.title,source:t.source,content:e.editFormContent},{arrayFormat:"indices",allowDots:!0});e.loading=!0,e.axios({method:"post",url:a,data:o}).then(function(t){if(e.loading=!1,"success"==t.data.result)e.$message.success({showClose:!0,message:"编辑成功",duration:1500}),e.editFormVisible=!1,e.search();else{var a=t.data.message;e.$message.error({showClose:!0,message:a.toString(),duration:2e3}),e.editFormVisible=!1}}).catch(function(t){e.loading=!1,e.$message.error({showClose:!0,message:"请求出现异常",duration:2e3})})}):e.$message.warning({showClose:!0,message:"必填数据不能为空",duration:1e3})}},activated:function(){this.handleSearch()},watch:{isRequested:function(){this.handleSearch()}},components:{VueEditor:u.VueEditor}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"artEdit"}},[a("el-row",{staticClass:"warp"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"warp-main",attrs:{span:24,"element-loading-text":"拼命加载中"}},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"文章名"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSearch(t):null}},model:{value:e.filters.content,callback:function(t){e.$set(e.filters,"content",t)},expression:"filters.content"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{keyup:function(t){e.keyUpSubmit(t)},click:e.handleSearch}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.showAddDialog}},[e._v("新增")])],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{data:e.items,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"[封面图片]"}},[a("img",{staticClass:"avatar2",attrs:{src:t.row.img}})]),e._v(" "),a("el-form-item",{attrs:{label:"[内容导读]"}},[a("div",{domProps:{innerHTML:e._s(t.row.readGuide)}})])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"文章名",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"source",label:"来源",width:"100",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"postDate",label:"日期",width:"150",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.showEditDialog(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.delItem(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:e.batchDeleteItems}},[e._v("批量删除")]),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next",background:"","page-size":e.pageSize,total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:e.editFormVisible,top:"4vh","close-on-click-modal":!0,"modal-append-to-body":!1},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"100px",rules:e.editFormRules}},[a("el-form-item",{attrs:{label:"文章名",prop:"title"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.title,callback:function(t){e.$set(e.editForm,"title",t)},expression:"editForm.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"来源",prop:"source"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.source,callback:function(t){e.$set(e.editForm,"source",t)},expression:"editForm.source"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"日期",prop:"postDate"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.editForm.postDate,callback:function(t){e.$set(e.editForm,"postDate",t)},expression:"editForm.postDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"封面",prop:"img"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://122.13.4.239/common/uploadImg","http-request":e.editImgUpload,"auto-upload":!0,"show-file-list":!1,"before-upload":e.beforeAvatarUpload}},[e.editCoverShow?a("img",{staticClass:"avatar",attrs:{src:e.editForm.img}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"内容",prop:"content"}},[a("div",{on:{click:function(t){e.clickImg(t)}}},e._l(e.editFormContent,function(t,o){return a("vue-editor",{directives:[{name:"show",rawName:"v-show",value:o+1==e.editCurrentPage,expression:"index+1==editCurrentPage"}],key:o,staticClass:"editor1",attrs:{useCustomImageHandler:"",editorToolbar:e.customToolbar},on:{click:function(t){e.clickImg(t)},imageAdded:e.handleImageAdded},model:{value:t.content,callback:function(a){e.$set(t,"content",a)},expression:"item.content"}})})),e._v(" "),a("el-pagination",{staticStyle:{},attrs:{layout:"prev, pager, next",total:e.editFormContent.length,"page-size":1,"current-page":e.editCurrentPage},on:{"update:currentPage":function(t){e.editCurrentPage=t}}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.editSubmit(t)}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新增",visible:e.addFormVisible,top:"4vh","close-on-click-modal":!0,"modal-append-to-body":!1},on:{"update:visible":function(t){e.addFormVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.addFormRules}},[a("el-form-item",{attrs:{label:"文章名",prop:"title"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.title,callback:function(t){e.$set(e.addForm,"title",t)},expression:"addForm.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"来源",prop:"source"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.source,callback:function(t){e.$set(e.addForm,"source",t)},expression:"addForm.source"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"日期",prop:"postDate"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.addForm.postDate,callback:function(t){e.$set(e.addForm,"postDate",t)},expression:"addForm.postDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"封面",prop:"img"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://122.13.4.239/common/uploadImg","http-request":e.addImgUpload,"auto-upload":!0,"show-file-list":!1,"before-upload":e.beforeAvatarUpload}},[e.addCoverShow?a("img",{staticClass:"avatar",attrs:{src:e.addForm.img}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"内容",prop:"content",row:20}},[a("div",{on:{click:function(t){e.clickImg(t)}}},e._l(e.addFormContent,function(t,o){return a("vue-editor",{directives:[{name:"show",rawName:"v-show",value:o+1==e.addCurrentPage,expression:"index+1==addCurrentPage"}],key:o,staticClass:"editor1",attrs:{useCustomImageHandler:"",editorToolbar:e.customToolbar},on:{imageAdded:e.handleImageAdded},model:{value:t.content,callback:function(a){e.$set(t,"content",a)},expression:"item.content"}})})),e._v(" "),a("el-pagination",{staticStyle:{},attrs:{layout:"prev, pager, next",total:1,"page-size":1,"current-page":e.addCurrentPage},on:{"update:currentPage":function(t){e.addCurrentPage=t}}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){return e.addSubmit(t)}}},[e._v("提交")])],1)],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"更改图片比例",visible:e.imgFormVisible,width:"30%",top:"8vh","close-on-click-modal":!0,"modal-append-to-body":!1},on:{"update:visible":function(t){e.imgFormVisible=t}}},[a("el-form",{attrs:{model:e.imgForm}},[a("el-form-item",{attrs:{label:"高(px)"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.imgForm.height,callback:function(t){e.$set(e.imgForm,"height",t)},expression:"imgForm.height"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"宽(px)"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.imgForm.width,callback:function(t){e.$set(e.imgForm,"width",t)},expression:"imgForm.width"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.imgFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.imgLoading},nativeOn:{click:function(t){return e.imgEdited(t)}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(h,p,!1,function(e){a("dBgW")},null,null).exports,v=(a("IZ1S"),{name:"objEdit",components:{VueEditor:u.VueEditor},props:["currentTab","isRequested"],data:function(){return{categoryId:0,filters:{content:""},items:[{id:"",name:"广东工业大学",postDate:"2018-08-20",source:"广东省经济和信息化委员会",content:"广东省经济和信息化委员会：http://www.gdei.gov.cn/ywfl/jscx/201808/t20180820_130227",introduction:"asdasdasd"}],total:1,pageSize:12,page:1,loading:!1,sels:[],initFormRules:[{name:"用户列表",categoryId:""},{name:"近期活动",categoryId:""},{name:"协会活动",categoryId:""},{name:"新闻热点",categoryId:""},{name:"其他",categoryId:""},{name:"行业动态",categoryId:6},{name:"资讯热点",categoryId:12},{name:"行业报告",categoryId:""},{name:"政策",categoryId:7},{name:"通知公告",categoryId:9},{name:"协会动态",categoryId:10},{name:"协会会员",categoryId:"18"},{name:"协会之窗",categoryId:""},{name:"教育培训",categoryId:""},{name:"企业新闻",categoryId:5},{name:"品牌展厅",categoryId:""},{name:"会员动态",categoryId:8},{name:"产品推荐",categoryId:2},{name:"产品新闻",categoryId:1},{name:"产品评测",categoryId:3},{name:"产品库",categoryId:""},{name:"技术研讨",categoryId:""},{name:"基础知识",categoryId:4},{name:"案例库",categoryId:""},{name:"专家库",categoryId:"16"},{name:"专家智点",categoryId:11},{name:"高校",categoryId:"17"},{name:"展会动态",categoryId:""},{name:"未来展会",categoryId:""},{name:"展会回顾",categoryId:""},{name:"会议动态",categoryId:""},{name:"未来会议",categoryId:""},{name:"会议回顾",categoryId:""},{name:"广告1",categoryId:""},{name:"广告2",categoryId:""},{name:"广告3",categoryId:""}],customToolbar:[[{header:[!1,1,2,3,4,5,6]}],["bold","italic","underline","strike"],["clean"],[{align:""},{align:"center"},{align:"right"},{align:"justify"}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],["blockquote","code-block"],["image","link"]],editFormVisible:!1,editFormRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],introduction:[{required:!0,message:"请输入内容",trigger:"blur"}],img:[{required:!1,message:"请输入图片地址",trigger:"blur"}]},editForm:{id:0,name:"",introduction:"asdasdasd",img:""},addFormVisible:!1,addLoading:!1,addFormRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],introduction:[{required:!0,message:"请输入内容",trigger:"blur"}],img:[{required:!1,message:"请输入图片地址",trigger:"blur"}]},addForm:{name:"",introduction:"asdasdasd",img:""},currentImg:new Object,imgFormVisible:!1,imgForm:{height:"",width:""},imgLoading:!1}},methods:{clickImg:function(e){var t=e.target;"IMG"==t.tagName&&(this.currentImg=e.target,this.imgForm.height=t.height,this.imgForm.width=t.width,t.title="点击编辑",this.imgFormVisible=!0)},imgEdited:function(){var e=parseFloat(this.imgForm.height),t=parseFloat(this.imgForm.width);this.currentImg.width=t,this.currentImg.height=e,this.imgFormVisible=!1},handleCurrentChange:function(e){this.page=e,this.search()},handleImageAdded:function(e,t,a,o){console.log(e);var i=this,s=e.name.split(".");s=s.pop(),console.log(s);var r=new FormData,n=void 0;s.indexOf("png")>-1||s.indexOf("jpg")>-1||s.indexOf("jpeg")>-1||s.indexOf("gif")>-1||s.indexOf("pdf")>-1?(r.append("imgs",e),n=i.HOST+"/common/uploadImg"):(r.append("videos",e),n=i.HOST+"/common/uploadVideo"),i.axios({url:n,method:"POST",headers:{"Content-Type":"multipart/form-data"},data:r}).then(function(e){if("success"==e.data.result){var o=e.data.message;s.indexOf("png")>-1||s.indexOf("jpg")>-1||s.indexOf("jpeg")>-1||s.indexOf("gif")>-1||s.indexOf("pdf")>-1?t.insertEmbed(a,"image",o[0]):t.insertEmbed(a,"video",o[0])}else i.$message.error({showClose:!0,message:"上传异常",duration:2e3})}).catch(function(e){console.log(e),i.$message.error({showClose:!0,message:"上传异常",duration:2e3})})},beforeAvatarUpload:function(e){e.size/1024/1024<10||this.$message.error("上传头像图片大小不能超过 10MB!")},showAddDialog:function(){this.addFormVisible=!0,this.addForm={name:"",introduction:""}},addImgUpload:function(e){var t=this,a=t.HOST+"/common/uploadImg",o=new FormData;o.append("imgs",e.file),t.axios({url:a,method:"POST",headers:{"Content-Type":"multipart/form-data"},data:o}).then(function(e){"success"==e.data.result?(t.$message.success({showClose:!0,message:"上传成功",duration:2e3}),t.addCoverShow=!0,t.addForm.img=e.data.message[0]):t.$message.error({showClose:!0,message:"图片上传异常",duration:2e3})}).catch(function(e){console.log(e),t.$message.error({showClose:!0,message:"图片上传异常",duration:2e3})})},addSubmit:function(){var e=this,t=d()({},this.addForm);t.name&&t.introduction?e.$confirm("确认添加吗","新增",{type:"warning"}).then(function(){var a=e.HOST+"/introduction/manager/addIntroduction",o=c.a.stringify({name:t.name,img:t.img,introduction:t.introduction,categoryId:e.categoryId});e.loading=!0,e.axios({method:"post",url:a,data:o}).then(function(t){if(e.loading=!1,"success"==t.data.result)e.$message.success({showClose:!0,message:"新增成功",duration:1500}),e.addFormVisible=!1,e.search();else{var a=t.data.message;e.$message.error({showClose:!0,message:a.toString(),duration:2e3}),e.addFormVisible=!1}}).catch(function(t){e.loading=!1,e.$message.error({showClose:!0,message:"请求出现异常",duration:2e3})})}):e.$message.warning({showClose:!0,message:"必填数据不能为空",duration:1e3})},delItem:function(e,t){var a=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){a.loading=!0;var e=t.id,o=a.HOST+"/introduction/manager/deleteIntroduction",i=c.a.stringify({ids:e});a.axios({method:"post",url:o,data:i}).then(function(e){if("success"==e.data.result)a.loading=!1,a.$message.success({showClose:!0,message:"删除成功",duration:1500}),a.search();else{var t=e.data.message;a.loading=!1,a.$message.error({showClose:!0,message:t.toString(),duration:2e3})}}).catch(function(e){a.loading=!1,console.log(e),a.$message.error({showClose:!0,message:"请求出现异常",duration:2e3})})}).catch(function(){})},selsChange:function(e){this.sels=e},batchDeleteItems:function(){var e=this;this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then(function(){e.loading=!0;var t=e.sels.map(function(e){return e.id}).toString(),a=e.HOST+"/introduction/manager/deleteIntroduction",o=c.a.stringify({ids:t});e.axios({method:"post",url:a,data:o}).then(function(t){if("success"==t.data.result)e.loading=!1,e.$message.success({showClose:!0,message:"删除成功",duration:1500}),e.search();else{var a=t.data.message;e.loading=!1,e.$message.error({showClose:!0,message:a.toString(),duration:2e3})}}).catch(function(t){e.loading=!1,console.log(t),e.$message.error({showClose:!0,message:"请求出现异常",duration:2e3})})}).catch(function(){})},handleSearch:function(){this.total=0,this.page=1,this.search()},search:function(){console.log(this.currentTab);var e=this,t=e.initFormRules.findIndex(function(t){return t.name===e.currentTab}),a=e.HOST+"/common/search";e.categoryId=e.initFormRules[t].categoryId;var o=e.filters.content.trim();if(""!=e.categoryId){var i={pageNum:e.page,categoryId:e.categoryId,content:o,channel:3};e.loading=!0,e.axios.get(a,{params:i}).then(function(t){e.items=t.data.message.results.list,e.total=t.data.message.results.total,e.pageSize=t.data.message.results.pageSize,e.loading=!1}).catch(function(t){e.loading=!1,e.items=[],e.total=0,e.$message.error({showClose:!0,message:"请求出现异常",duration:2e3})})}else e.items=[],e.total=0,e.$message.error({showClose:!0,message:"数据异常",duration:2e3})},showEditDialog:function(e,t){this.editFormVisible=!0,this.editForm=d()({},t)},editImgUpload:function(e){var t=this,a=t.HOST+"/common/uploadImg",o=new FormData;o.append("imgs",e.file),t.axios({url:a,method:"POST",headers:{"Content-Type":"multipart/form-data"},data:o}).then(function(e){"success"==e.data.result?(t.editCoverShow=!0,t.editForm.img=e.data.message[0]):t.$message.error({showClose:!0,message:"图片上传异常",duration:2e3})}).catch(function(e){console.log(e),t.$message.error({showClose:!0,message:"图片上传异常",duration:2e3})})},editSubmit:function(){var e=this,t=d()({},this.editForm);t.name&&t.introduction?e.$confirm("确认更改吗","编辑",{type:"warning"}).then(function(){var a=e.HOST+"/introduction/manager/updateIntroduction",o=c.a.stringify({id:t.id,name:t.name,img:t.img,introduction:t.introduction});e.loading=!0,e.axios({method:"post",url:a,data:o}).then(function(t){if(e.loading=!1,"success"==t.data.result)e.$message.success({showClose:!0,message:"新增成功",duration:1500}),e.editFormVisible=!1,e.search();else{var a=t.data.message;e.$message.error({showClose:!0,message:a.toString(),duration:2e3}),e.editFormVisible=!1}}).catch(function(t){e.loading=!1,e.$message.error({showClose:!0,message:"请求出现异常",duration:2e3})})}):e.$message.warning({showClose:!0,message:"必填数据不能为空",duration:1e3})}},activated:function(){this.handleSearch()},watch:{isRequested:function(){this.handleSearch(),console.log(this.isRequested)}}}),b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"objEdit"}},[a("el-row",{staticClass:"warp"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"warp-main",attrs:{span:24,"element-loading-text":"拼命加载中"}},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"名称"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSearch(t):null}},model:{value:e.filters.content,callback:function(t){e.$set(e.filters,"content",t)},expression:"filters.content"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.showAddDialog}},[e._v("新增")])],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{data:e.items,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"[简介]"}},[a("div",{staticStyle:{display:"block"},domProps:{innerHTML:e._s(t.row.introduction)}})])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.showEditDialog(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.delItem(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:e.batchDeleteItems}},[e._v("批量删除")]),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next",background:"","page-size":e.pageSize,total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:e.editFormVisible,"close-on-click-modal":!0,top:"8vh","modal-append-to-body":!1},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"100px",rules:e.editFormRules}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"封面",prop:"img"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://122.13.4.239/common/uploadImg","http-request":e.editImgUpload,"auto-upload":!0,"show-file-list":!1,"before-upload":e.beforeAvatarUpload}},[e.editCoverShow?a("img",{staticClass:"avatar",attrs:{src:e.editForm.img}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"简介内容",prop:"introduction"}},[a("div",{on:{click:function(t){e.clickImg(t)}}},[a("vue-editor",{staticClass:"editor1",attrs:{editorToolbar:e.customToolbar,useCustomImageHandler:""},on:{imageAdded:e.handleImageAdded},model:{value:e.editForm.introduction,callback:function(t){e.$set(e.editForm,"introduction",t)},expression:"editForm.introduction"}})],1)])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.editSubmit(t)}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新增",visible:e.addFormVisible,"close-on-click-modal":!0,top:"8vh","modal-append-to-body":!1},on:{"update:visible":function(t){e.addFormVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.addFormRules}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"封面",prop:"img"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://122.13.4.239/common/uploadImg","http-request":e.addImgUpload,"auto-upload":!0,"show-file-list":!1,"before-upload":e.beforeAvatarUpload}},[e.addCoverShow?a("img",{staticClass:"avatar",attrs:{src:e.editForm.img}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"简介内容",prop:"introduction"}},[a("div",{on:{click:function(t){e.clickImg(t)}}},[a("vue-editor",{staticClass:"editor1",attrs:{editorToolbar:e.customToolbar,useCustomImageHandler:""},on:{imageAdded:e.handleImageAdded},model:{value:e.addForm.introduction,callback:function(t){e.$set(e.addForm,"introduction",t)},expression:"addForm.introduction"}})],1)])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){return e.addSubmit(t)}}},[e._v("提交")])],1)],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"更改图片比例",visible:e.imgFormVisible,width:"30%",top:"8vh","close-on-click-modal":!0,"modal-append-to-body":!1},on:{"update:visible":function(t){e.imgFormVisible=t}}},[a("el-form",{attrs:{model:e.imgForm}},[a("el-form-item",{attrs:{label:"高(px)"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.imgForm.height,callback:function(t){e.$set(e.imgForm,"height",t)},expression:"imgForm.height"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"宽(px)"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.imgForm.width,callback:function(t){e.$set(e.imgForm,"width",t)},expression:"imgForm.width"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.imgFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.imgLoading},nativeOn:{click:function(t){return e.imgEdited(t)}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var w=a("VU/8")(v,b,!1,function(e){a("o+oW")},null,null).exports,y={name:"prdEdit",components:{VueEditor:u.VueEditor},props:["currentTab","isRequested"],data:function(){return{categoryId:0,filters:{content:""},items:[{id:"",name:"广东工业大学",lastUpdateTime:"2018-08-20",price:"广东省经济和信息化委员会",introduction:"asdasdasd"}],total:1,pageSize:12,page:1,loading:!1,sels:[],initFormRules:[],customToolbar:[[{header:[!1,1,2,3,4,5,6]}],["bold","italic","underline","strike"],["clean"],[{align:""},{align:"center"},{align:"right"},{align:"justify"}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],["blockquote","code-block"],["image","link"]],editCoverShow:!1,editFormVisible:!1,editFormRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],introduction:[{required:!1,message:"请输入内容",trigger:"blur"}],img:[{required:!1,message:"请输入图片地址",trigger:"blur"}]},editForm:{id:0,name:"",introduction:"asdasdasd",img:""},addFormVisible:!1,addCoverShow:!1,addLoading:!1,addFormRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],introduction:[{required:!1,message:"请输入内容",trigger:"blur"}],img:[{required:!1,message:"请输入图片地址",trigger:"blur"}]},addForm:{name:"",introduction:"asdasdasd",img:""},currentImg:new Object,imgFormVisible:!1,imgForm:{height:"",width:""},imgLoading:!1}},methods:{formatPrice:function(e,t){return 0==e.price?"￥":e.price},clickImg:function(e){var t=e.target;"IMG"==t.tagName&&(this.currentImg=e.target,this.imgForm.height=t.height,this.imgForm.width=t.width,t.title="点击编辑",this.imgFormVisible=!0)},imgEdited:function(){var e=parseFloat(this.imgForm.height),t=parseFloat(this.imgForm.width);this.currentImg.width=t,this.currentImg.height=e,this.imgFormVisible=!1},handleCurrentChange:function(e){this.page=e,this.search()},handleImageAdded:function(e,t,a,o){console.log(e);var i=this,s=e.name.split(".");s=s.pop(),console.log(s);var r=new FormData,n=void 0;s.indexOf("png")>-1||s.indexOf("jpg")>-1||s.indexOf("jpeg")>-1||s.indexOf("gif")>-1||s.indexOf("pdf")>-1?(r.append("imgs",e),n=i.HOST+"/common/uploadImg"):(r.append("videos",e),n=i.HOST+"/common/uploadVideo"),i.axios({url:n,method:"POST",headers:{"Content-Type":"multipart/form-data"},data:r}).then(function(e){if("success"==e.data.result){var o=e.data.message;s.indexOf("png")>-1||s.indexOf("jpg")>-1||s.indexOf("jpeg")>-1||s.indexOf("gif")>-1||s.indexOf("pdf")>-1?t.insertEmbed(a,"image",o[0]):t.insertEmbed(a,"video",o[0])}else i.$message.error({showClose:!0,message:"上传异常",duration:2e3})}).catch(function(e){console.log(e),i.$message.error({showClose:!0,message:"上传异常",duration:2e3})})},beforeAvatarUpload:function(e){e.size/1024/1024<10||this.$message.error("上传头像图片大小不能超过 10MB!")},showAddDialog:function(){this.addFormVisible=!0,this.addForm={name:"",introduction:""}},addImgUpload:function(e){var t=this,a=t.HOST+"/common/uploadImg",o=new FormData;o.append("imgs",e.file),t.axios({url:a,method:"POST",headers:{"Content-Type":"multipart/form-data"},data:o}).then(function(e){"success"==e.data.result?(t.$message.success({showClose:!0,message:"上传成功",duration:2e3}),t.addCoverShow=!0,t.addForm.img=e.data.message[0]):t.$message.error({showClose:!0,message:"图片上传异常",duration:2e3})}).catch(function(e){console.log(e),t.$message.error({showClose:!0,message:"图片上传异常",duration:2e3})})},addSubmit:function(){var e=this,t=d()({},this.addForm);t.name?e.$confirm("确认添加吗","新增",{type:"warning"}).then(function(){var a=e.HOST+"/product/addProduct",o=c.a.stringify({name:t.name,lastUpdateTime:t.lastUpdateTime,introduction:t.introduction,img:t.img});e.loading=!0,e.axios({method:"post",url:a,data:o}).then(function(t){if(e.loading=!1,"success"==t.data.result)e.$message.success({showClose:!0,message:"新增成功",duration:1500}),e.addFormVisible=!1,e.search();else{var a=t.data.message;e.$message.error({showClose:!0,message:a.toString(),duration:2e3}),e.addFormVisible=!1}}).catch(function(t){e.loading=!1,e.$message.error({showClose:!0,message:"请求出现异常",duration:2e3})})}):e.$message.warning({showClose:!0,message:"必填数据不能为空",duration:1e3})},delItem:function(e,t){var a=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){a.loading=!0;var e=t.id,o=a.HOST+"/product/manager/deleteProduct",i=c.a.stringify({ids:e});a.axios({method:"post",url:o,data:i}).then(function(e){if("success"==e.data.result)a.loading=!1,a.$message.success({showClose:!0,message:"删除成功",duration:1500}),a.search();else{var t=e.data.message;a.loading=!1,a.$message.error({showClose:!0,message:t.toString(),duration:2e3})}}).catch(function(e){a.loading=!1,console.log(e),a.$message.error({showClose:!0,message:"请求出现异常",duration:2e3})})}).catch(function(){})},selsChange:function(e){this.sels=e},batchDeleteItems:function(){var e=this;this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then(function(){e.loading=!0;var t=e.sels.map(function(e){return e.id}).toString(),a=e.HOST+"/product/manager/deleteProduct",o=c.a.stringify({ids:t});e.axios({method:"post",url:a,data:o}).then(function(t){if("success"==t.data.result)e.loading=!1,e.$message.success({showClose:!0,message:"删除成功",duration:1500}),e.search();else{var a=t.data.message;e.loading=!1,e.$message.error({showClose:!0,message:a.toString(),duration:2e3})}}).catch(function(t){e.loading=!1,console.log(t),e.$message.error({showClose:!0,message:"请求出现异常",duration:2e3})})}).catch(function(){})},handleSearch:function(){this.total=0,this.page=1,this.search()},search:function(){var e=this,t=e.HOST+"/common/search",a=e.filters.content.trim(),o={pageNum:e.page,content:a,channel:2};e.loading=!0,e.axios.get(t,{params:o}).then(function(t){e.items=t.data.message.results.list,e.items.forEach(function(t,a){t.lastUpdateTime&&(e.items[a].lastUpdateTime=t.lastUpdateTime.slice(0,10))}),e.total=t.data.message.results.total,e.pageSize=t.data.message.results.pageSize,e.loading=!1}).catch(function(t){e.loading=!1,e.items=[],e.total=0,e.$message.error({showClose:!0,message:"请求出现异常",duration:2e3})})},showEditDialog:function(e,t){this.editFormVisible=!0,this.editForm=d()({},t)},editImgUpload:function(e){var t=this,a=t.HOST+"/common/uploadImg",o=new FormData;o.append("imgs",e.file),t.axios({url:a,method:"POST",headers:{"Content-Type":"multipart/form-data"},data:o}).then(function(e){"success"==e.data.result?(t.editCoverShow=!0,t.editForm.img=e.data.message[0]):t.$message.error({showClose:!0,message:"图片上传异常",duration:2e3})}).catch(function(e){console.log(e),t.$message.error({showClose:!0,message:"图片上传异常",duration:2e3})})},editSubmit:function(){var e=this,t=d()({},this.editForm);t.name?e.$confirm("确认更改吗","编辑",{type:"warning"}).then(function(){var a=e.HOST+"/product/manager/updateProduct",o=c.a.stringify({id:t.id,name:t.name,lastUpdateTime:t.lastUpdateTime,introduction:t.introduction,img:t.img});e.loading=!0,e.axios({method:"post",url:a,data:o}).then(function(t){if(e.loading=!1,"success"==t.data.result)e.$message.success({showClose:!0,message:"编辑成功",duration:1500}),e.editFormVisible=!1,e.search();else{var a=t.data.message;e.$message.error({showClose:!0,message:a.toString(),duration:2e3}),e.editFormVisible=!1}}).catch(function(t){e.loading=!1,e.$message.error({showClose:!0,message:"请求出现异常",duration:2e3})})}):e.$message.warning({showClose:!0,message:"必填数据不能为空",duration:1e3})}},activated:function(){this.handleSearch()},watch:{isRequested:function(){this.handleSearch()}}},F={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"prodEdit"}},[a("el-row",{staticClass:"warp"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"warp-main",attrs:{span:24,"element-loading-text":"拼命加载中"}},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"名称"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSearch(t):null}},model:{value:e.filters.content,callback:function(t){e.$set(e.filters,"content",t)},expression:"filters.content"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.showAddDialog}},[e._v("新增")])],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{data:e.items,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"[图文简介]"}},[a("img",{attrs:{src:t.row.img,alt:""}}),e._v(" "),a("div",{staticStyle:{display:"block"},domProps:{innerHTML:e._s(t.row.introduction)}})])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格",width:"100",sortable:"",formatter:e.formatPrice}}),e._v(" "),a("el-table-column",{attrs:{prop:"lastUpdateTime",label:"更新日期",width:"150",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.showEditDialog(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.delItem(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:e.batchDeleteItems}},[e._v("批量删除")]),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next",background:"","page-size":e.pageSize,total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:e.editFormVisible,"close-on-click-modal":!0,top:"8vh","modal-append-to-body":!1},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"100px",rules:e.editFormRules}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"更新日期",prop:"lastUpdateTime"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择更新日期"},model:{value:e.editForm.lastUpdateTime,callback:function(t){e.$set(e.editForm,"lastUpdateTime",t)},expression:"editForm.lastUpdateTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"封面",prop:"img"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://122.13.4.239/common/uploadImg","http-request":e.editImgUpload,"auto-upload":!0,"show-file-list":!1,"before-upload":e.beforeAvatarUpload}},[e.editCoverShow?a("img",{staticClass:"avatar",attrs:{src:e.editForm.img}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"简介内容",prop:"introduction"}},[a("div",{on:{click:function(t){e.clickImg(t)}}},[a("vue-editor",{staticClass:"editor1",attrs:{editorToolbar:e.customToolbar,useCustomImageHandler:""},on:{imageAdded:e.handleImageAdded},model:{value:e.editForm.introduction,callback:function(t){e.$set(e.editForm,"introduction",t)},expression:"editForm.introduction"}})],1)])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.editSubmit(t)}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新增",visible:e.addFormVisible,"close-on-click-modal":!0,top:"8vh","modal-append-to-body":!1},on:{"update:visible":function(t){e.addFormVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.addFormRules}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"更新日期",prop:"lastUpdateTime"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择更新日期"},model:{value:e.addForm.lastUpdateTime,callback:function(t){e.$set(e.addForm,"lastUpdateTime",t)},expression:"addForm.lastUpdateTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"封面",prop:"img"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://122.13.4.239/common/uploadImg","http-request":e.addImgUpload,"auto-upload":!0,"show-file-list":!1,"before-upload":e.beforeAvatarUpload}},[e.addCoverShow?a("img",{staticClass:"avatar",attrs:{src:e.editForm.img}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"简介内容",prop:"introduction"}},[a("div",{on:{click:function(t){e.clickImg(t)}}},[a("vue-editor",{staticClass:"editor1",attrs:{editorToolbar:e.customToolbar,useCustomImageHandler:""},on:{imageAdded:e.handleImageAdded},model:{value:e.addForm.introduction,callback:function(t){e.$set(e.addForm,"introduction",t)},expression:"addForm.introduction"}})],1)])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){return e.addSubmit(t)}}},[e._v("提交")])],1)],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"更改图片比例",visible:e.imgFormVisible,width:"30%",top:"8vh","close-on-click-modal":!0,"modal-append-to-body":!1},on:{"update:visible":function(t){e.imgFormVisible=t}}},[a("el-form",{attrs:{model:e.imgForm}},[a("el-form-item",{attrs:{label:"高(px)"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.imgForm.height,callback:function(t){e.$set(e.imgForm,"height",t)},expression:"imgForm.height"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"宽(px)"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.imgForm.width,callback:function(t){e.$set(e.imgForm,"width",t)},expression:"imgForm.width"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.imgFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.imgLoading},nativeOn:{click:function(t){return e.imgEdited(t)}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var I=a("VU/8")(y,F,!1,function(e){a("BJpj")},"data-v-179ec557",null).exports,C={name:"metEdit",components:{VueEditor:u.VueEditor},props:["currentTab","isRequested"],data:function(){return{categoryId:0,timeType:0,filters:{content:""},items:[{id:"",title:"标题信息",host:"举办方",holdTime:"举办日期",address:"地址信息",introduction:"简介区",coverImg:null}],total:1,pageSize:12,page:1,loading:!1,sels:[],initFormRules:[{name:"用户列表",categoryId:""},{name:"近期活动",categoryId:""},{name:"协会活动",categoryId:""},{name:"新闻热点",categoryId:""},{name:"其他",categoryId:""},{name:"行业动态",categoryId:6},{name:"资讯热点",categoryId:12},{name:"行业报告",categoryId:""},{name:"政策",categoryId:7},{name:"通知公告",categoryId:9},{name:"协会动态",categoryId:10},{name:"协会会员",categoryId:""},{name:"协会之窗",categoryId:""},{name:"教育培训",categoryId:""},{name:"企业新闻",categoryId:5},{name:"品牌展厅",categoryId:""},{name:"会员动态",categoryId:8},{name:"产品推荐",categoryId:2},{name:"产品新闻",categoryId:1},{name:"产品评测",categoryId:3},{name:"产品库",categoryId:""},{name:"技术研讨",categoryId:""},{name:"基础知识",categoryId:4},{name:"案例库",categoryId:""},{name:"专家库",categoryId:""},{name:"专家智点",categoryId:11},{name:"高校",categoryId:""},{name:"展会动态",categoryId:"2",timeType:"1"},{name:"未来展会",categoryId:"2",timeType:"2"},{name:"展会回顾",categoryId:"2",timeType:"3"},{name:"会议动态",categoryId:"1",timeType:"1"},{name:"未来会议",categoryId:"1",timeType:"2"},{name:"会议回顾",categoryId:"1",timeType:"3"},{name:"广告1",categoryId:""},{name:"广告2",categoryId:""},{name:"广告3",categoryId:""}],customToolbar:[[{header:[!1,1,2,3,4,5,6]}],["bold","italic","underline","strike"],["clean"],[{align:""},{align:"center"},{align:"right"},{align:"justify"}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],["blockquote","code-block"],["image","link"]],editCoverShow:!1,editFormVisible:!1,editFormRules:{title:[{required:!0,message:"请输入会议名",trigger:"blur"}],host:[{required:!0,message:"请输入举办方",trigger:"blur"}],address:[{required:!1,message:"请输入来源",trigger:"blur"}],introduction:[{required:!1,message:"请输入内容",trigger:"blur"}],holdTime:[{required:!0,message:"请填写日期",trigger:"blur"}]},editForm:{id:0,title:"",host:"",address:"",holdTime:"",introduction:{},coverImg:""},addCoverShow:!1,addFormVisible:!1,addLoading:!1,addFormRules:{title:[{required:!0,message:"请输入会议名",trigger:"blur"}],host:[{required:!0,message:"请输入举办方",trigger:"blur"}],address:[{required:!1,message:"请输入来源",trigger:"blur"}],introduction:[{required:!1,message:"请输入内容",trigger:"blur"}],holdTime:[{required:!0,message:"请填写日期",trigger:"blur"}]},addForm:{title:"",host:"",address:"",holdTime:"",introduction:"",coverImg:""},currentImg:new Object,imgFormVisible:!1,imgForm:{height:"",width:""},imgLoading:!1}},methods:{clickImg:function(e){var t=e.target;"IMG"==t.tagName&&(this.currentImg=e.target,this.imgForm.height=t.height,this.imgForm.width=t.width,t.title="点击编辑",this.imgFormVisible=!0)},imgEdited:function(){var e=parseFloat(this.imgForm.height),t=parseFloat(this.imgForm.width);this.currentImg.width=t,this.currentImg.height=e,this.imgFormVisible=!1},handleCurrentChange:function(e){this.page=e,this.search()},handleImageAdded:function(e,t,a,o){var i=this,s=e.name.split(".");s=s.pop();var r=new FormData,n=void 0;s.indexOf("png")>-1||s.indexOf("jpg")>-1||s.indexOf("jpeg")>-1||s.indexOf("gif")>-1||s.indexOf("pdf")>-1?(r.append("imgs",e),n=i.HOST+"/common/uploadImg"):(r.append("videos",e),n=i.HOST+"/common/uploadVideo"),i.axios({url:n,method:"POST",headers:{"Content-Type":"multipart/form-data"},data:r}).then(function(e){if("success"==e.data.result){var o=e.data.message;s.indexOf("png")>-1||s.indexOf("jpg")>-1||s.indexOf("jpeg")>-1||s.indexOf("gif")>-1||s.indexOf("pdf")>-1?t.insertEmbed(a,"image",o[0]):t.insertEmbed(a,"video",o[0])}else i.$message.error({showClose:!0,message:"上传异常",duration:2e3})}).catch(function(e){console.log(e),i.$message.error({showClose:!0,message:"上传异常",duration:2e3})})},beforeAvatarUpload:function(e){e.size/1024/1024<10||this.$message.error("上传头像图片大小不能超过 10MB!")},showAddDialog:function(){this.addFormVisible=!0,this.addForm={title:"",host:"",address:"",holdTime:"",introduction:""}},addImgUpload:function(e){var t=this,a=t.HOST+"/common/uploadImg",o=new FormData;o.append("imgs",e.file),t.axios({url:a,method:"POST",headers:{"Content-Type":"multipart/form-data"},data:o}).then(function(e){"success"==e.data.result?(t.$message.success({showClose:!0,message:"上传成功",duration:2e3}),t.addCoverShow=!0,t.addForm.coverImg=e.data.message[0]):t.$message.error({showClose:!0,message:"图片上传异常",duration:2e3})}).catch(function(e){console.log(e),t.$message.error({showClose:!0,message:"图片上传异常",duration:2e3})})},addSubmit:function(){var e=this,t=d()({},e.addForm),a=new Date(t.holdTime),o=g(a);t.title&&t.holdTime&&t.host?e.$confirm("确认添加吗","新增",{type:"warning"}).then(function(){var a=e.HOST+"/conference/addConference",i=c.a.stringify({title:t.title,address:t.address,coverImg:t.coverImg,holdTime:o,host:t.host,introduction:t.introduction,type:e.categoryId});e.loading=!0,e.axios({method:"post",url:a,data:i}).then(function(t){if(e.loading=!1,"success"==t.data.result)e.$message.success({showClose:!0,message:"新增成功",duration:1500}),e.addFormVisible=!1,e.search();else{var a=t.data.message;e.$message.error({showClose:!0,message:a.toString(),duration:2e3}),e.addFormVisible=!1}}).catch(function(t){e.loading=!1,e.$message.error({showClose:!0,message:"请求出现异常",duration:2e3})})}):e.$message.warning({showClose:!0,message:"必填数据不能为空",duration:1e3})},delItem:function(e,t){var a=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){a.loading=!0;var e=t.id,o=a.HOST+"/information/manager/deleteInformation",i=c.a.stringify({ids:e});a.axios({method:"post",url:o,data:i}).then(function(e){if("success"==e.data.result)a.loading=!1,a.$message.success({showClose:!0,message:"删除成功",duration:1500}),a.search();else{var t=e.data.message;a.loading=!1,a.$message.error({showClose:!0,message:t.toString(),duration:2e3})}}).catch(function(e){a.loading=!1,console.log(e),a.$message.error({showClose:!0,message:"请求出现异常",duration:2e3})})}).catch(function(){})},selsChange:function(e){this.sels=e},batchDeleteItems:function(){var e=this;this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then(function(){e.loading=!0;var t=e.sels.map(function(e){return e.id}).toString(),a=e.HOST+"/information/manager/deleteInformation",o=c.a.stringify({ids:t});e.axios({method:"post",url:a,data:o}).then(function(t){if("success"==t.data.result)e.loading=!1,e.$message.success({showClose:!0,message:"删除成功",duration:1500}),e.search();else{var a=t.data.message;e.loading=!1,e.$message.error({showClose:!0,message:a.toString(),duration:2e3})}}).catch(function(t){e.loading=!1,console.log(t),e.$message.error({showClose:!0,message:"请求出现异常",duration:2e3})})}).catch(function(){})},handleSearch:function(){this.total=0,this.page=1,this.search()},search:function(){var e=this,t=e.initFormRules.findIndex(function(t){return t.name===e.currentTab}),a=e.HOST+"/conference/findConference";e.categoryId=e.initFormRules[t].categoryId,e.timeType=e.initFormRules[t].timeType;var o=e.filters.content.trim();if(""!=e.categoryId){var i={pageNum:e.page,categoryId:e.categoryId,content:o,timeType:e.timeType};e.loading=!0,e.axios.get(a,{params:i}).then(function(t){e.items=t.data.message.list,e.items.forEach(function(t,a){e.items[a].holdTime=t.postDate.slice(0,10)}),e.total=t.data.message.total,e.pageSize=t.data.message.pageSize,e.loading=!1}).catch(function(t){e.loading=!1,e.items=[],e.total=0,e.$message.error({showClose:!0,message:"请求出现异常",duration:2e3})})}else e.items=[],e.total=0,e.$message.error({showClose:!0,message:"数据异常",duration:2e3})},showEditDialog:function(e,t){this.editFormVisible=!0,t.coverImg&&(that.editCoverShow=!0),this.editForm=d()({},t)},editImgUpload:function(e){var t=this,a=t.HOST+"/common/uploadImg",o=new FormData;o.append("imgs",e.file),t.axios({url:a,method:"POST",headers:{"Content-Type":"multipart/form-data"},data:o}).then(function(e){"success"==e.data.result?(t.editCoverShow=!0,t.editForm.coverImg=e.data.message[0]):t.$message.error({showClose:!0,message:"图片上传异常",duration:2e3})}).catch(function(e){console.log(e),t.$message.error({showClose:!0,message:"图片上传异常",duration:2e3})})},editSubmit:function(){var e=this,t=d()({},this.editForm),a=new Date(t.holdTime),o=g(a);t.title&&t.id?e.$confirm("确认更改吗","编辑",{type:"warning"}).then(function(){var a=e.HOST+"conference/updateConference",i=c.a.stringify({id:t.id,title:t.title,address:t.address,coverImg:t.coverImg,host:t.host,holdTime:o,introduction:t.introduction,conferenceType:e.categoryId},{arrayFormat:"indices",allowDots:!0});e.loading=!0,e.axios({method:"post",url:a,data:i}).then(function(t){if(e.loading=!1,"success"==t.data.result)e.$message.success({showClose:!0,message:"编辑成功",duration:1500}),e.editFormVisible=!1,e.search();else{var a=t.data.message;e.$message.error({showClose:!0,message:a.toString(),duration:2e3}),e.editFormVisible=!1}}).catch(function(t){e.loading=!1,e.$message.error({showClose:!0,message:"请求出现异常",duration:2e3})})}):e.$message.warning({showClose:!0,message:"必填数据不能为空",duration:1e3})}},activated:function(){this.handleSearch()},watch:{isRequested:function(){this.handleSearch()}}},S={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"metEdit"}},[a("el-row",{staticClass:"warp"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"warp-main",attrs:{span:24,"element-loading-text":"拼命加载中"}},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"会议名"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSearch(t):null}},model:{value:e.filters.content,callback:function(t){e.$set(e.filters,"content",t)},expression:"filters.content"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.showAddDialog}},[e._v("新增")])],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{data:e.items,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"[封面图片]"}},[a("img",{staticClass:"avatar2",attrs:{src:t.row.coverImg}})]),e._v(" "),a("el-form-item",{attrs:{label:"[内容导读]"}},[a("div",{domProps:{innerHTML:e._s(t.row.introduction)}})])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"会议名称",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"host",label:"举办方",width:"220",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址",width:"180",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"holdTime",label:"举办日期",width:"150",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.showEditDialog(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.delItem(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:e.batchDeleteItems}},[e._v("批量删除")]),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next",background:"","page-size":e.pageSize,total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:e.editFormVisible,"close-on-click-modal":!0,top:"4vh","modal-append-to-body":!1},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"100px",rules:e.editFormRules}},[a("el-form-item",{attrs:{label:"会议名",prop:"title"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.title,callback:function(t){e.$set(e.editForm,"title",t)},expression:"editForm.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"举办方",prop:"host"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.host,callback:function(t){e.$set(e.editForm,"host",t)},expression:"editForm.host"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址",prop:"address"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.address,callback:function(t){e.$set(e.editForm,"address",t)},expression:"editForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"日期",prop:"holdTime"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"举办日期"},model:{value:e.editForm.holdTime,callback:function(t){e.$set(e.editForm,"holdTime",t)},expression:"editForm.holdTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"封面",prop:"coverImg"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://122.13.4.239/common/uploadImg","http-request":e.editImgUpload,"auto-upload":!0,"show-file-list":!1,"before-upload":e.beforeAvatarUpload}},[e.editCoverShow?a("img",{staticClass:"avatar",attrs:{src:e.editForm.coverImg}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"简介内容",prop:"introduction"}},[a("div",{on:{click:function(t){e.clickImg(t)}}},[a("vue-editor",{staticClass:"editor1",attrs:{editorToolbar:e.customToolbar,useCustomImageHandler:""},on:{imageAdded:e.handleImageAdded},model:{value:e.editForm.introduction,callback:function(t){e.$set(e.editForm,"introduction",t)},expression:"editForm.introduction"}})],1)])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.editSubmit(t)}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新增",visible:e.addFormVisible,"close-on-click-modal":!0,top:"4vh","modal-append-to-body":!1},on:{"update:visible":function(t){e.addFormVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.addFormRules}},[a("el-form-item",{attrs:{label:"会议名",prop:"title"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.title,callback:function(t){e.$set(e.addForm,"title",t)},expression:"addForm.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"举办方",prop:"host"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.host,callback:function(t){e.$set(e.addForm,"host",t)},expression:"addForm.host"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址",prop:"address"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.address,callback:function(t){e.$set(e.addForm,"address",t)},expression:"addForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"日期",prop:"holdTime"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"举办日期"},model:{value:e.addForm.holdTime,callback:function(t){e.$set(e.addForm,"holdTime",t)},expression:"addForm.holdTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"封面",prop:"coverImg"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://122.13.4.239/common/uploadImg","http-request":e.addImgUpload,"auto-upload":!0,"show-file-list":!1,"before-upload":e.beforeAvatarUpload}},[e.addCoverShow?a("img",{staticClass:"avatar",attrs:{src:e.addForm.coverImg}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"简介内容",prop:"introduction"}},[a("div",{on:{click:function(t){e.clickImg(t)}}},[a("vue-editor",{staticClass:"editor1",attrs:{useCustomImageHandler:"",editorToolbar:e.customToolbar},on:{imageAdded:e.handleImageAdded},model:{value:e.addForm.introduction,callback:function(t){e.$set(e.addForm,"introduction",t)},expression:"addForm.introduction"}})],1)])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){return e.addSubmit(t)}}},[e._v("提交")])],1)],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"更改图片比例",visible:e.imgFormVisible,width:"30%",top:"8vh","close-on-click-modal":!0,"modal-append-to-body":!1},on:{"update:visible":function(t){e.imgFormVisible=t}}},[a("el-form",{attrs:{model:e.imgForm}},[a("el-form-item",{attrs:{label:"高(px)"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.imgForm.height,callback:function(t){e.$set(e.imgForm,"height",t)},expression:"imgForm.height"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"宽(px)"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.imgForm.width,callback:function(t){e.$set(e.imgForm,"width",t)},expression:"imgForm.width"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.imgFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.imgLoading},nativeOn:{click:function(t){return e.imgEdited(t)}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var _={name:"admin",components:{UserList:n,ArtEdit:f,ObjEdit:w,PrdEdit:I,MetEdit:a("VU/8")(C,S,!1,function(e){a("oVf1")},"data-v-5c39fa13",null).exports},props:["isShow"],data:function(){return{isRequested:!1,defaultActiveIndex:"用户列表",collapsed:!1,currentPath:"user-list",currentTab:"",items:[{name:"用户",path:"",leaf:!0,icon:"fa-user",menuShow:!0,children:[{path:"user-list",name:"用户列表",menuShow:!0}]},{name:"首页",path:"/home",leaf:!1,icon:"fa-home",menuShow:!0,children:[{path:"",name:"近期活动",menuShow:!0},{path:"",name:"协会活动",menuShow:!0},{path:"",name:"新闻热点",menuShow:!0},{path:"",name:"其他",menuShow:!0}]},{name:"资讯",path:"/news",leaf:!1,menuShow:!0,icon:"fa-commenting",children:[{path:"artEdit",name:"行业动态",menuShow:!0},{path:"artEdit",name:"资讯热点",menuShow:!0},{path:"artEdit",name:"行业报告",menuShow:!0}]},{name:"政策",path:"/policy",leaf:!0,menuShow:!0,icon:"fa-file-text",children:[{path:"artEdit",name:"政策",menuShow:!0}]},{name:"协会",path:"/association",leaf:!1,menuShow:!0,icon:"fa-users",children:[{path:"artEdit",name:"通知公告",menuShow:!0},{path:"artEdit",name:"协会动态",menuShow:!0},{path:"objEdit",name:"协会会员",menuShow:!0},{path:"",name:"协会之窗",menuShow:!0},{path:"",name:"教育培训",menuShow:!0}]},{name:"企业",path:"/enterprise",leaf:!1,menuShow:!0,icon:"fa-globe",children:[{path:"artEdit",name:"企业新闻",menuShow:!0},{path:"",name:"品牌展厅",menuShow:!0},{path:"artEdit",name:"会员动态",menuShow:!0}]},{name:"产品",path:"/product",leaf:!1,menuShow:!0,icon:"fa-android",children:[{path:"artEdit",name:"产品推荐",menuShow:!0},{path:"artEdit",name:"产品新闻",menuShow:!0},{path:"artEdit",name:"产品评测",menuShow:!0},{path:"prdEdit",name:"产品库",menuShow:!0}]},{name:"技术",path:"/tech",leaf:!1,menuShow:!0,icon:"fa-lightbulb-o",children:[{path:"",name:"技术研讨",menuShow:!0},{path:"",name:"基础知识",menuShow:!0},{path:"",name:"案例库",menuShow:!0}]},{name:"供需",path:"/io",leaf:!1,menuShow:!1,icon:"fa-tachometer"},{name:"商城",path:"/mall",leaf:!1,menuShow:!1,icon:"fa-shopping-cart"},{name:"人才",path:"/talent",leaf:!1,menuShow:!0,icon:"fa-id-badge",children:[{path:"objEdit",name:"专家库",menuShow:!0},{path:"artEdit",name:"专家智点",menuShow:!0},{path:"objEdit",name:"高校",menuShow:!0},{path:"",name:"最新招聘",menuShow:!0}]},{name:"展会",path:"/exhibition",leaf:!1,menuShow:!0,icon:"fa-tasks",children:[{path:"metEdit",name:"展会动态",menuShow:!0},{path:"metEdit",name:"未来展会",menuShow:!0},{path:"metEdit",name:"展会回顾",menuShow:!0}]},{name:"会议",path:"/meeting",leaf:!1,menuShow:!0,icon:"fa-pencil-square-o",children:[{path:"metEdit",name:"会议动态",menuShow:!0},{path:"metEdit",name:"未来会议",menuShow:!0},{path:"metEdit",name:"会议回顾",menuShow:!0}]},{name:"公众号",path:"/public",leaf:!0,menuShow:!1,icon:"fa-weixin "},{name:"关于我们",path:"/about",leaf:!0,menuShow:!1,icon:"fa-address-book"},{name:"广告",path:"",leaf:!1,menuShow:!1,icon:"fa-bullhorn",children:[{path:"",name:"广告1",menuShow:!0},{path:"",name:"广告2",menuShow:!0},{path:"",name:"广告3",menuShow:!0}]}],timeId:null}},methods:{collapse:function(){this.collapsed=!this.collapsed},handleSelect:function(e){var t=this;clearTimeout(t.timeId),this.timeId=setTimeout(function(){var a=t.items,o=void 0,i=void 0;for(o in a){var s=a[o];if(0!=s.menuShow)for(i in s.children){var r=s.children[i];r.name===e&&(t.currentPath=r.path,t.isRequested=1!=t.isRequested)}}t.currentTab=e},300)}}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isShow?a("div",{attrs:{id:"admin"}},[a("aside",{class:{showSidebar:!e.collapsed}},[a("div",{staticClass:"menu-toggle",on:{click:function(t){return t.preventDefault(),e.collapse(t)}}},[a("i",{directives:[{name:"show",rawName:"v-show",value:!e.collapsed,expression:"!collapsed"}],staticClass:"el-icon-arrow-down"}),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:e.collapsed,expression:"collapsed"}],staticClass:"el-icon-more"})]),e._v(" "),a("el-menu",{attrs:{"default-active":e.defaultActiveIndex,collapse:e.collapsed},on:{select:e.handleSelect}},[e._l(e.items,function(t,o){return t.menuShow?[t.leaf?t.leaf&&t.children&&t.children.length?a("el-menu-item",{key:t.children[0].name,attrs:{index:t.children[0].name}},[a("i",{staticClass:"fa fa-2x",class:t.icon,staticStyle:{"vertical-align":"middle",width:"28px","text-align":"center","margin-right":"20px"}}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.children[0].name))])]):e._e():a("el-submenu",{key:o,attrs:{index:o+""}},[a("template",{slot:"title"},[a("i",{staticClass:"fa fa-2x",class:t.icon,staticStyle:{"vertical-align":"middle",width:"28px","text-align":"center","margin-right":"20px"}}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])]),e._v(" "),e._l(t.children,function(t){return t.menuShow?a("el-menu-item",{key:t.name,attrs:{index:t.name}},[a("i",{class:t.iconCls}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])]):e._e()})],2)]:e._e()})],2)],1),e._v(" "),a("div",{staticClass:"content-container"},[a("keep-alive",[a(this.currentPath,{tag:"user-list",attrs:{"current-tab":e.currentTab,isRequested:e.isRequested}})],1)],1)]):e._e()},staticRenderFns:[]};var k=a("VU/8")(_,x,!1,function(e){a("sboR")},"data-v-5d4f780e",null);t.a=k.exports},sboR:function(e,t){},tvR6:function(e,t){}},["hRzL"]);
//# sourceMappingURL=admin.735cbda038f64656ebca.js.map